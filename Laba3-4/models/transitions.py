TRANSITIONS = [
    ['000', '000', lambda p, pi1, pi2: p],
    ['000', '100', lambda p, pi1, pi2: not p],
    ['100', '100', lambda p, pi1, pi2: pi1],
    ['100', '101', lambda p, pi1, pi2: (not p) and (not pi1)],
    ['100', '001', lambda p, pi1, pi2: p and (not pi1)],
    ['001', '001', lambda p, pi1, pi2: p and pi2],
    ['001', '101', lambda p, pi1, pi2: (not p) and pi2],
    ['001', '000', lambda p, pi1, pi2: p and (not pi2)],
    ['001', '100', lambda p, pi1, pi2: (not p) and (not pi2)],
    ['101', '101', lambda p, pi1, pi2: (pi1 and pi2) or ((not p) and (not pi1) and (not pi2))],
    ['101', '001', lambda p, pi1, pi2: p and (not pi1) and (not pi2)],
    ['101', '100', lambda p, pi1, pi2: pi1 and (not pi2)],
    ['101', '111', lambda p, pi1, pi2: (not p) and (not pi1) and pi2],
    ['101', '011', lambda p, pi1, pi2: p and (not pi1) and pi2],
    ['011', '011', lambda p, pi1, pi2: p and pi2],
    ['011', '001', lambda p, pi1, pi2: p and (not pi2)],
    ['011', '101', lambda p, pi1, pi2: (not p) and (not pi2)],
    ['011', '111', lambda p, pi1, pi2: (not p) and pi2],
    ['111', '111', lambda p, pi1, pi2: (pi1 and pi2) or ((not p) and (not pi1) and (not pi2))],
    ['111', '121', lambda p, pi1, pi2: (not p) and (not pi1) and pi2],
    ['111', '021', lambda p, pi1, pi2: p and (not pi1) and pi2],
    ['111', '011', lambda p, pi1, pi2: p and (not pi1) and (not pi2)],
    ['111', '101', lambda p, pi1, pi2: pi1 and (not pi2)],
    ['021', '021', lambda p, pi1, pi2: p and pi2],
    ['021', '011', lambda p, pi1, pi2: p and (not pi2)],
    ['021', '111', lambda p, pi1, pi2: (not p) and (not pi2)],
    ['021', '121', lambda p, pi1, pi2: (not p) and pi2],
    ['121', '121', lambda p, pi1, pi2: (pi1 and pi2) or ((not p) and (not pi1))],
    ['121', '021', lambda p, pi1, pi2: p and (not pi1)],
    ['121', '111', lambda p, pi1, pi2: pi1 and (not pi2)],
]